{% set isShow = app.request.attributes.get('_route') == 'app_estimate_show' %}
{# pour gérer le mode d'affichage #}
{% set isCreate = app.request.attributes.get('_route') == 'app_estimate_new' %}
{# pour gérer le mode de création #}
{% set isEdit = app.request.attributes.get('_route') == 'app_estimate_edit' %}
{# pour gérer le mode d'édition #}

{{ form_start(form, {'attr': {'class': 'space-y-3'}}) }}

{% for estimate in form %}
	{% if estimate.vars.name == '_token' %}
		{# Pour cacher le token #}
		{{ form_widget(estimate, {'attr': {'class': 'hidden'}}) }}
	{% else %}
		<div class="flex flex-col">
			{% if isShow %}
				{# Si le mode est affichage alors on met tout en readonly et on retire le btn save #}
				{% if estimate.vars.name != 'save' %}
					{{ form_label(estimate, null, {'label_attr': {'class': 'font-semibold text-gray-700'}}) }}
					{{ form_widget(estimate, {'attr': {'class': 'form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm', 'disabled': 'disabled'}}) }}
				{% endif %}
			{% else %}
				{# Sinon on affiche tout normalement pour ajouter / modifier #}
				{{ form_label(estimate, null, {'label_attr': {'class': 'font-semibold text-gray-700'}}) }}
				{% if estimate.vars.name == 'save' %}
					{# pour gérer le style du btn save #}
					{{ form_widget(estimate, {'attr': {'class' : 'flex justify-center items-center gap-x-2 text-sm font-semibold text-white bg-black hover:bg-gray-800 rounded-lg px-3 py-2'}}) }}
				{% else %}
					{{ form_widget(estimate, {'attr': {'class': 'form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-300 focus:ring focus:ring-gray-200 focus:ring-opacity-50'}}) }}
				{% endif %}
			{% endif %}
		</div>
	{% endif %}
{% endfor %}

{% if isShow %}
	<div class="flex justify-end">
		<a href="{{ path('app_estimate_index') }}" class="flex justify-center items-center gap-x-2 text-sm font-semibold text-white bg-gray-800 hover:bg-black rounded-lg px-3 py-2">Retour</a>
	</div>
{% endif %}

{{ form_end(form, {'render_rest': false}) }}
