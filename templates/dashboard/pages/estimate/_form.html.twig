{# variable pour savoir si on est sur la page de visualisation ou de création #}
{% set isShow = app.request.attributes.get('_route') == 'app_estimate_show' %}

{{ form_start(form._token, {'attr': {'class': 'space-y-3 hidden-csrf'}}) }}

{# boucle sur les champs du form #}
{% for field in form %}
	<div class="flex flex-col">
		{% if isShow %}
        {# si on est sur la page de visualisation #}
			{% if field.vars.name != 'save' %}
				{# si le champ n'est pas le bouton de sauvegarde #}
				{{ form_errors(field, {'attr': {'class': 'text-red-500 text-sm font-semibold'}}) }}
				{{ form_label(field, null, {'label_attr': {'class': 'font-semibold text-gray-700'}}) }}
				{{ form_widget(field, {'attr': {'class': 'form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-300 focus:ring focus:ring-gray-200 focus:ring-opacity-50', 'disabled': 'disabled'}}) }}
			{% endif %}
		{% else %}
			{# sinon si on est sur la page de création ou modification #}
			{{ form_errors(field, {'attr': {'class': 'text-red-500 text-sm font-semibold'}}) }}
			{{ form_label(field, null, {'label_attr': {'class': 'font-semibold text-gray-700'}}) }}
			{% if field.vars.name == 'save' %}
            {# si le champ est le bouton de sauvegarde (pour le style du bouton :D ) #}
				{{ form_widget(field, {'attr': {'class' : 'flex justify-center items-center gap-x-2 text-sm font-semibold text-white bg-black hover:bg-gray-800 rounded-lg px-3 py-2'}}) }}
			{% else %}
				{{ form_widget(field, {'attr': {'class': 'form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-300 focus:ring focus:ring-gray-200 focus:ring-opacity-50'}}) }}
			{% endif %}
		{% endif %}
	</div>
{% endfor %}

<div class="flex justify-end">
    <a href="{{ path('app_estimate_index') }}" class="flex justify-center items-center gap-x-2 text-sm font-semibold text-white bg-gray-800 hover:bg-black rounded-lg px-3 py-2">Retour</a>
</div>

{{ form_end(form, {'render_rest': false}) }}
